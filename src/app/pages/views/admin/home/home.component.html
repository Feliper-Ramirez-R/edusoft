



<div *ngIf="user.user.role !=5 && user.user.role !=6 " class="grid layout-dashboard">



    
    <div class="col-12 lg:col-4 md:col-4">
        <div class="card widget-download-files">
            <div class="card-header">
                <div class="title">
                    <h5>Usuarios en linea</h5>
                </div>
            </div>
            <div class="widget-team">
                <ul>
                    <li *ngFor="let alum of users_in_line">
                        <div class="grid member">
                            <div class="col-10 team-box">
                                <div class="profile-image">
                                    <img src="assets/images/user.png" alt="mirage-layout" />
                                </div>
                                <div>
                                    <h6 class="team-member">{{alum.name}}</h6>
                                    <span class="team-member-role">{{alum.email}}</span>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

        <div class="card col-12 lg:col-4 md:col-4 ">
            <span class="text-xl font-normal text-gray-600">Mi perfil</span>
        
            <div class="flex justify-content-center flex-wrap card-container">
                <div
                    class="flex align-items-center justify-content-center border-circle w-5rem h-5rem bg-indigo-400 font-bold text-gray-900 border-round m-2">
                    <span class="text-5xl font-normal text-white">{{user.user.name[0] | titlecase}}</span></div>
            </div>
            <div class="flex align-items-center justify-content-center font-bold text-gray-900 m-2"><span
                    class="text-2xl font-normal text-gray-600">{{user.user.role_name | titlecase}}</span></div>
            <div>
                <p-divider layout="horizontal"></p-divider>
            </div>
        
        
            <div class="col-12">
                <div class=" widget-team">
                    <ul>
                        <li>
                            <div class="grid member">
                                <div class="col-7 team-box">
                                    <div class="profile-image">
                                        <i class="pi pi-user" style="font-size: 1.5rem"></i>
                                    </div>
                                    <div>
                                        <h6 class="team-member">Nombre</h6>
                                        <span class="team-member-role">{{user.user.name}}</span>
                                    </div>
                                </div>
        
                            </div>
                        </li>
                        <li>
                            <div class="grid member">
                                <div class="col-7 team-box">
                                    <div class="profile-image">
                                        <i class="pi pi-envelope" style="font-size: 1.5rem"></i>
                                    </div>
                                    <div>
                                        <h6 class="team-member">Correo</h6>
                                        <span class="team-member-role">{{user.user.email}}</span>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="grid member">
                                <div class="col-7 team-box">
                                    <div class="profile-image">
                                        <i class="pi pi-id-card" style="font-size: 1.5rem"></i>
                                    </div>
                                    <div>
                                        <h6 class="team-member">N° de identificación</h6>
                                        <span class="team-member-role">{{user.user.dni}}</span>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>


    


    <div class="col-12 lg:col-4 md:col-4 ">
        <div class="card">    
            <full-calendar [options]="calendarOptions"[events]="events"></full-calendar>
        </div>
    </div>

</div>

<p-dialog #dd [(visible)]="showDialog" [breakpoints]="{'960px': '75vw', '640px': '90vw'}" [style]="{width: '36rem'}" [modal]="true" [closable]="true" (onHide)="view = ''">
    <ng-template pTemplate="header">
        <span class="text-900 font-semibold text-xl">{{view === 'display' ? changedEvent.title : view === 'new' ? 'Nuevo evento' : 'Editar evento'}}</span>
    </ng-template>
    <ng-template pTemplate="content">
        <div *ngIf="view === 'display'">
            <span class="text-900 font-semibold block mb-2">Description</span>
            <span class="block mb-3">{{changedEvent.description}}</span>

            <div class="grid">
                <div class="col-6">
                    <div class="text-900 font-semibold mb-2">Inicio</div>
                    <p class="flex align-items-center m-0">
                        <i class="pi pi-fw pi-clock text-700 mr-2"></i>
                        <span>{{changedEvent.start.toISOString().slice(0,10)}}</span>
                    </p>
                </div>
                <div class="col-6">
                    <div class="text-900 font-semibold mb-2">Fin</div>
                    <p class="flex align-items-center m-0">
                        <i class="pi pi-fw pi-clock text-700 mr-2"></i>
                        <span>{{changedEvent.end.toISOString().slice(0,10)}}</span>
                    </p>
                </div>
                <!-- <div class="col-12">
                    <div class="text-900 font-semibold mb-2">Location</div>
                    <p class="flex align-items-center m-0">
                        <i class="pi pi-fw pi-clock text-700 mr-2"></i>
                        <span>{{changedEvent.location}}</span>
                    </p>
                </div> -->
                <!-- <div class="col-12">
                    <div class="text-900 font-semibold mb-2">Color</div>
                    <p class="flex align-items-center m-0">
                        <span class="inline-flex flex-shrink-0 w-1rem h-1rem mr-2 border-circle" [style.backgroundColor]="changedEvent.tag.color"></span>
                        <span>{{changedEvent.tag.name}}</span>
                    </p>
                </div> -->
            </div>
        </div>
        <div *ngIf="view !== 'display'">
            <div class="grid p-fluid formgrid">
                <div class="col-12 field">
                    <label for="title" class="text-900 font-semibold">Titulo</label>
                    <span class="p-input-icon-left">
                        <i class="pi pi-pencil"></i>
                        <input id="title" type="text" pInputText placeholder="Titulo" [(ngModel)]="changedEvent.title" />
                    </span>
                </div>
                <!-- <div class="col-12 md:col-6 field">
                    <label for="location" class="text-900 font-semibold">Ubicación</label>
                    <span class="p-input-icon-left">
                        <i class="pi pi-map-marker"></i>
                        <input id="location" type="text" pInputText placeholder="Ubicación" [(ngModel)]="changedEvent.location" />
                    </span>
                </div> -->
                <div class="col-12 field">
                    <label for="description" class="text-900 font-semibold">Descripción</label>
                    <textarea id="description" type="text" pInputTextarea [rows]="5" [(ngModel)]="changedEvent.description" style="resize: none"></textarea>
                </div>

                <div class="col-12 md:col-6 field">
                    <label for="start" class="text-900 font-semibold">Fecha inicio</label>
                    <p-calendar [appendTo]="dd" dateFormat="mm-dd-yy" [maxDate]="changedEvent.end" [showTime]="true" [required]="true" inputId="start" [(ngModel)]="changedEvent.start"></p-calendar>
                </div>
                <div class="col-12 md:col-6 field">
                    <label for="start" class="text-900 font-semibold">Fecha fin</label>
                    <p-calendar [appendTo]="dd" dateFormat="mm-dd-yy" [minDate]="changedEvent.start" [showTime]="true" [required]="true" inputId="end" [(ngModel)]="changedEvent.end"></p-calendar>
                </div>
                <!-- <div class="col-12 field">
                    <label for="company-color" class="text-900 font-semibold">Color</label>
                    <p-dropdown inputId="company-color" [appendTo]="dd" [options]="tags" [(ngModel)]="changedEvent.tag" optionLabel="name">
                        <ng-template pTemplate="selectedItem">
                            <div *ngIf="changedEvent.tag" class="flex align-items-center">
                                <div class="flex-shrink-0 w-1rem h-1rem mr-2 border-circle" [style.backgroundColor]="changedEvent.tag.color"></div>
                                <div>{{changedEvent.tag.name}}</div>
                            </div>
                        </ng-template>
                        <ng-template let-tag pTemplate="item">
                            <div class="flex align-items-center">
                                <div class="flex-shrink-0 w-1rem h-1rem mr-2 border-circle" [style.backgroundColor]="tag.color"></div>
                                <div>{{tag.name}}</div>
                            </div>
                        </ng-template>
                    </p-dropdown>
                </div> -->
            </div>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton *ngIf="view === 'display'" label="Borrar" icon="pi pi-trash"  class="p-button-danger" (click)="deleteModal(changedEvent)"></button>
        <button pButton *ngIf="view === 'display'" label="Editar" icon="pi pi-pencil" (click)="onEditClick()"></button>
        <button pButton *ngIf="view === 'new' || view === 'edit'" label="Guardar" icon="pi pi-check" (click)="view === 'new'?guardarEvento():editarEvento()" [disabled]="!changedEvent.start || !changedEvent.end"></button>
    </ng-template>
</p-dialog>

<p-dialog [(visible)]="itemDeleteDialog" header="Eliminar un usuario" [modal]="true" [style]="{ width: '450px' }">
    <div class="flex align-items-center justify-content-center">
        <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
        <span *ngIf="changedEvent" >Esta seguro que quieres eliminar el evento <b>{{ changedEvent.title }}</b>?</span>
    </div>
    <ng-template pTemplate="footer">
        <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No"
            (click)="itemDeleteDialog = false"></button>
         <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Si"
            (click)="delete(changedEvent)"></button>
    </ng-template>
</p-dialog>


